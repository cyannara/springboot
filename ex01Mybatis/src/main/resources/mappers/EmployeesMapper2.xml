<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Employees">
	<!-- 전체조회 -->
	<select id="findAll" 
	        resultType="EmployeesDTO">
		SELECT * 
		  FROM employees 
	</select>
	
	<!-- 단건조회 -->
	<select id="findById" 
	        resultType="EmployeesDTO" 
	        parameterType="long">
		SELECT EMPLOYEE_ID,
			   FIRST_NAME,
		       LAST_NAME 
		  FROM employees 
		 WHERE employee_id = #{employeeId} 		
	</select>
	
	<!-- 부서와 이름으로 검색 -->
	<select id="findBydeptAndName"
	        resultType="EmployeesDTO">
		SELECT *
		  FROM employees
		 <where>
		 	<if test="departmentId != null">
		 	   and department_id = #{departmentId}
		 	</if>
		 	<if test="firstName != null and ! firstName.equals('')">
		 	   and first_name = #{firstName}
		 	</if>
		 </where> 
	</select>
	
</mapper>


